# verify-migrated-pods
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —É—Å–ø–µ—à–Ω–æ –ª–∏ –ø–µ—Ä–µ–µ—Ö–∞–ª–∏ –ø–æ–¥—ã —Å –¥—Ä–µ–π–Ω–Ω—É—Ç–æ–π –Ω–æ–¥—ã Kubernetes –Ω–∞ –¥—Ä—É–≥–∏–µ –Ω–æ–¥—ã –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è kubectl drain <node> –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–¥—ã –≤–∞–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ø–æ–¥—ã (–æ—Ç Deployment, StatefulSet –∏ —Ç.–¥.) –ø–µ—Ä–µ—Å–æ–∑–¥–∞–ª–∏—Å—å –Ω–∞ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö –∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–¥–æ–≤. 

# üì• –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ 

–°–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–µ—Ç —Ñ–∞–π–ª —Å —Å–ø–∏—Å–∫–æ–º –ø–æ–¥–æ–≤ –¥–æ –¥—Ä–µ–π–Ω–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–º–∞–Ω–¥–æ–π: 
```bash
kubectl get pods -A -o wide | grep your-worker-node > pods-before-drain.txt
```
 

–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ kubectl get pods -A -o wide, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ:  
```
namespace    pod-name-12345-abcde    1/1     Running    0    7d    10.100.x.x    worker
...
```
 
 

    ‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã (kube-system, logs, monitoring –∏ —Ç.–¥.), —Ç–∞–∫ –∫–∞–∫ –∏—Ö –ø–æ–¥—ã —á–∞—Å—Ç–æ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, DaemonSet). 
     

 
# ‚ñ∂Ô∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ–¥–æ–≤ –¥–æ –¥—Ä–µ–π–Ω–∞: 
    
```bash
kubectl get pods -A -o wide > pods-before-drain.txt
```
–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `WORKER=` –∏–º—è –≤–∞—à–µ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥—Ä–µ–π–Ω –Ω–æ–¥—ã

 

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç: 
```bash
./verify-migrated-pods.sh
```     
     
     

    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª –¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.txt. –ß—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π ‚Äî –∏–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é INPUT –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç (–ø—Ä–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–µ). 
 
  
  #üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 

    kubectl –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ü–µ–ª–µ–≤—ã–º –∫–ª–∞—Å—Ç–µ—Ä–æ–º.
    Bash (Linux/macOS).
    grep, awk, sed ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã.
     
